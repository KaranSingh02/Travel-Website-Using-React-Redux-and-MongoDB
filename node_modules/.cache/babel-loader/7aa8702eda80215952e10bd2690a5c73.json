{"ast":null,"code":"var _jsxFileName = \"/home/karan/Documents/My-Website-EVS/src/Components/BookingRequests.js\";\nimport React from 'react';\nimport { Table } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { ticketDetails, items } from \"./../Stitch/mongodb\";\nimport trash from \"./../images/trash.svg\";\nimport './../CSS/bookingrequests.css';\n\nclass BookingRequests extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: [],\n      customerName: []\n    };\n  }\n\n  async componentDidMount() {\n    var curruser = this.props.reducerState.userReducer.currentuser; //getting tickets data from db of current user.\n\n    var data = await ticketDetails.find({}).toArray();\n    var name = await items.find({}).toArray();\n    data.forEach(element => {\n      this.setState({\n        tickets: [...this.state.tickets, element]\n      }); //console.log(\"Tickets:- \" + Tickets);\n    });\n    name.forEach(element => {\n      this.setState({\n        customerName: [...this.state.customerName, element]\n      });\n    });\n  }\n\n  async customerName(ticket) {\n    var Customer = this.state.customerName.filter(item => item.owner_id === ticket.customer_id);\n    return Customer.name;\n  }\n\n  render() {\n    //console.log(this.state.tickets);\n    //storing the tickets list in table view\n    var ticketList = this.state.tickets.map(details => {\n      var customerName = customerName(details);\n      return React.createElement(\"tr\", {\n        key: details._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, customerName), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, details.start), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, details.destiny), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, details.startdate), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, details.returndate), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, details.quantity), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"trashimg\",\n        src: trash,\n        alt: \"Delete\",\n        onClick: e => ticketDetails.deleteOne({\n          \"_id\": details._id\n        }).then(e => {\n          this.setState({\n            tickets: this.state.tickets.filter(list => list._id !== details._id)\n          });\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      })));\n    });\n    return React.createElement(\"div\", {\n      className: \"brcontainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"brheading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Booking Requests\"), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      size: \"sm\",\n      variant: \"dark\",\n      responsive: true,\n      style: {\n        paddingTop: '30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Customer Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Start\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Destiny\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Start Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Return Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Delete\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, ticketList)));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  reducerState: state\n});\n\nexport default connect(mapStateToProps)(BookingRequests);","map":{"version":3,"sources":["/home/karan/Documents/My-Website-EVS/src/Components/BookingRequests.js"],"names":["React","Table","connect","ticketDetails","items","BookingRequests","Component","constructor","props","state","tickets","customerName","componentDidMount","curruser","reducerState","userReducer","currentuser","data","find","toArray","name","forEach","element","setState","ticket","Customer","filter","item","owner_id","customer_id","render","ticketList","map","details","_id","start","destiny","startdate","returndate","quantity","trash","e","deleteOne","then","list","paddingTop","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Table } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\nimport { ticketDetails,items } from \"./../Stitch/mongodb\";\r\nimport trash from './../images/trash.svg';\r\nimport './../CSS/bookingrequests.css';\r\n\r\nclass BookingRequests extends React.Component {\r\n\r\n    constructor(props) {\r\n       super(props)\r\n       this.state = {\r\n            tickets: [],\r\n            customerName: []\r\n       }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        var curruser = this.props.reducerState.userReducer.currentuser;\r\n        //getting tickets data from db of current user.\r\n        var data = await ticketDetails.find({}).toArray();\r\n        var name = await items.find({}).toArray();\r\n        data.forEach(element => {\r\n            this.setState({ tickets: [...this.state.tickets,element]});\r\n        //console.log(\"Tickets:- \" + Tickets);\r\n    });\r\n\r\n    name.forEach(element => {\r\n        this.setState({ customerName: [...this.state.customerName,element]});\r\n});\r\n}\r\n\r\n    async customerName(ticket) {\r\n        var Customer = this.state.customerName.filter(item => item.owner_id === ticket.customer_id);\r\n        return Customer.name;\r\n    }\r\n\r\n    render() {\r\n        //console.log(this.state.tickets);\r\n        //storing the tickets list in table view\r\n        var ticketList = this.state.tickets.map( (details) => {\r\n\r\n            var customerName = customerName(details); \r\n            return(\r\n            <tr key={details._id}>\r\n                <td>{customerName}</td>\r\n                <td>{details.start}</td>\r\n                <td>{details.destiny}</td>\r\n                <td>{details.startdate}</td>\r\n                <td>{details.returndate}</td>\r\n                <td>{details.quantity}</td>\r\n                <td><img className='trashimg' src={trash} alt='Delete'  onClick = { (e) => \r\n                    ticketDetails.deleteOne({ \"_id\": details._id}).then( \r\n                        (e) => { this.setState({ tickets: this.state.tickets.filter( list => list._id !== details._id ) })}\r\n                        )}/>\r\n                </td>\r\n            </tr>)\r\n        } );\r\n\r\n        return (\r\n            <div className = 'brcontainer'>\r\n                <h1 className = 'brheading'>Booking Requests</h1>\r\n\r\n                <Table striped bordered hover size=\"sm\" variant=\"dark\" responsive style={{ paddingTop: '30px'}}>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Customer Name</th>\r\n                            <th>Start</th>\r\n                            <th>Destiny</th>\r\n                            <th>Start Date</th>\r\n                            <th>Return Date</th>\r\n                            <th>Quantity</th>\r\n                            <th>Delete</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {ticketList}\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n            );\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    reducerState: state\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps)(BookingRequests);\r\n"]},"metadata":{},"sourceType":"module"}