{"ast":null,"code":"import { app } from \"./app.js\";\nimport { UserPasswordAuthProviderClient, UserPasswordCredential } from \"mongodb-stitch-browser-sdk\"; // const { UserPasswordAuthProviderClient } = Stitch;\n\nconst emailPasswordClient = app.auth.getProviderClient(UserPasswordAuthProviderClient.factory);\nexport async function registerUser(email, password) {\n  //allow users to log in with email and password\n  await emailPasswordClient.registerWithEmail(email, password).then(() => window.location.href = '/login').catch(err => alert(err));\n}\nexport async function loginUser(email, password) {\n  const credential = new UserPasswordCredential(email, password);\n  await app.auth.loginWithCredential(credential) // Returns a promise that resolves to the authenticated user\n  .then(user => window.location.href = '/').catch(err => alert(`login failed with error: ${err}`));\n}\nexport function hasLoggedInUser() {\n  // Check if there is currently a logged in user  \n  console.log('from has logged in auth :-' + app.auth.isLoggedIn);\n  return app.auth.isLoggedIn;\n}\nexport function getCurrentUser() {\n  // Return the user object of the currently logged in user\n  return app.auth.isLoggedIn ? app.auth.user : null;\n}\nexport async function logoutCurrentUser() {\n  // Logout the currently logged in user\n  const user = getCurrentUser();\n  await app.auth.logoutUserWithId(user.id).then(() => window.location.href = '/register');\n}","map":{"version":3,"sources":["E:/React/My-Website-EVS/src/Stitch/authentication.js"],"names":["app","UserPasswordAuthProviderClient","UserPasswordCredential","emailPasswordClient","auth","getProviderClient","factory","registerUser","email","password","registerWithEmail","then","window","location","href","catch","err","alert","loginUser","credential","loginWithCredential","user","hasLoggedInUser","console","log","isLoggedIn","getCurrentUser","logoutCurrentUser","logoutUserWithId","id"],"mappings":"AAAA,SAASA,GAAT,QAAoB,UAApB;AACC,SAASC,8BAAT,EAAwCC,sBAAxC,QAAsE,4BAAtE,C,CACD;;AAEA,MAAMC,mBAAmB,GAAGH,GAAG,CAACI,IAAJ,CACvBC,iBADuB,CACLJ,8BAA8B,CAACK,OAD1B,CAA5B;AAIA,OAAO,eAAeC,YAAf,CAA4BC,KAA5B,EAAkCC,QAAlC,EAA4C;AAC/C;AACA,QAAMN,mBAAmB,CAACO,iBAApB,CAAsCF,KAAtC,EAA6CC,QAA7C,EACDE,IADC,CACI,MAAOC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QADlC,EAEDC,KAFC,CAEKC,GAAG,IAAIC,KAAK,CAAED,GAAF,CAFjB,CAAN;AAGH;AAED,OAAO,eAAeE,SAAf,CAAyBV,KAAzB,EAA+BC,QAA/B,EAAyC;AAC5C,QAAMU,UAAU,GAAG,IAAIjB,sBAAJ,CAA2BM,KAA3B,EAAiCC,QAAjC,CAAnB;AAEA,QAAMT,GAAG,CAACI,IAAJ,CAASgB,mBAAT,CAA6BD,UAA7B,EACN;AADM,GAELR,IAFK,CAECU,IAAD,IAAWT,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAFlC,EAGLC,KAHK,CAGCC,GAAG,IAAIC,KAAK,CAAE,4BAA2BD,GAAI,EAAjC,CAHb,CAAN;AAIH;AAED,OAAO,SAASM,eAAT,GAA2B;AAChC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,+BAA6BxB,GAAG,CAACI,IAAJ,CAASqB,UAAlD;AACA,SAAOzB,GAAG,CAACI,IAAJ,CAASqB,UAAhB;AACD;AAED,OAAO,SAASC,cAAT,GAA0B;AAC7B;AACA,SAAO1B,GAAG,CAACI,IAAJ,CAASqB,UAAT,GAAsBzB,GAAG,CAACI,IAAJ,CAASiB,IAA/B,GAAsC,IAA7C;AACH;AAED,OAAO,eAAeM,iBAAf,GAAmC;AACtC;AAEA,QAAMN,IAAI,GAAGK,cAAc,EAA3B;AACA,QAAM1B,GAAG,CAACI,IAAJ,CAASwB,gBAAT,CAA0BP,IAAI,CAACQ,EAA/B,EAAmClB,IAAnC,CACF,MAAMC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,WAD3B,CAAN;AAGH","sourcesContent":["import { app } from \"./app.js\";\r\n import { UserPasswordAuthProviderClient,UserPasswordCredential } from \"mongodb-stitch-browser-sdk\";\r\n// const { UserPasswordAuthProviderClient } = Stitch;\r\n\r\nconst emailPasswordClient = app.auth\r\n    .getProviderClient(UserPasswordAuthProviderClient.factory);\r\n\r\n\r\nexport async function registerUser(email,password) {\r\n    //allow users to log in with email and password\r\n    await emailPasswordClient.registerWithEmail(email, password)\r\n        .then(() =>  window.location.href = '/login')\r\n        .catch(err => alert( err));\r\n}\r\n\r\nexport async function loginUser(email,password) {\r\n    const credential = new UserPasswordCredential(email,password);\r\n    \r\n    await app.auth.loginWithCredential(credential)\r\n    // Returns a promise that resolves to the authenticated user\r\n    .then((user) =>  window.location.href = '/')\r\n    .catch(err => alert(`login failed with error: ${err}`));\r\n}\r\n\r\nexport function hasLoggedInUser() {\r\n  // Check if there is currently a logged in user  \r\n  console.log('from has logged in auth :-'+app.auth.isLoggedIn)\r\n  return app.auth.isLoggedIn;\r\n}\r\n\r\nexport function getCurrentUser() {\r\n    // Return the user object of the currently logged in user\r\n    return app.auth.isLoggedIn ? app.auth.user : null;\r\n}\r\n\r\nexport async function logoutCurrentUser() {\r\n    // Logout the currently logged in user\r\n    \r\n    const user = getCurrentUser();\r\n    await app.auth.logoutUserWithId(user.id).then(\r\n        () => window.location.href = '/register'\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}